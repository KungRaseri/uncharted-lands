# =============================================================================
# Uncharted Lands - Server Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values
# Never commit the .env file to version control!
# =============================================================================

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
# Port the game server will listen on
# Default: 3001
# Production: Render/Railway will set this automatically
PORT=3001

# Host address to bind to
# Use 0.0.0.0 to listen on all interfaces (required for Docker/cloud deployments)
# Use localhost or 127.0.0.1 for local development only
HOST=0.0.0.0

# Node environment
# Options: development, production, test, e2e
# Most hosting platforms set this automatically
NODE_ENV=development

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# PostgreSQL connection string
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE
# Example (local): postgresql://postgres:password@localhost:5432/uncharted-lands
# Example (Neon): postgresql://user:password@ep-xxx.us-east-2.aws.neon.tech/uncharted-lands?sslmode=require
# Example (Render): postgresql://user:password@dpg-xxx.oregon-postgres.render.com/uncharted_lands
DATABASE_URL="postgresql://postgres:password@localhost:5432/uncharted-lands"

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
# Socket.IO & REST API CORS origins (comma-separated, no spaces)
# IMPORTANT: Must include your client URL(s) for WebSocket connections to work
# Development: http://localhost:5173 (SvelteKit dev server)
# Production: Add your deployed client URL (e.g., https://uncharted-lands.vercel.app)
CORS_ORIGINS=http://localhost:5173

# -----------------------------------------------------------------------------
# Game Loop Configuration
# -----------------------------------------------------------------------------
# Tick rate (ticks per second) - controls game simulation frequency
# Default: 60 (60 ticks/second = ~16.67ms per tick)
# Lower values reduce server load but make game less responsive
# Higher values increase precision but require more CPU
TICK_RATE=60

# Resource calculation interval (seconds)
# Default: 3600 (1 hour) - resources accumulated hourly in production
# For testing/development, set lower (e.g., 60 = 1 minute, 10 = 10 seconds)
# E2E tests should use very low values (1-10 seconds) for fast feedback
RESOURCE_INTERVAL_SEC=3600

# Socket.IO emit interval (seconds)
# Default: 1 (emit resource updates every second for smooth UI)
# Higher values reduce network traffic but make UI updates less smooth
SOCKET_EMIT_INTERVAL_SEC=1

# Population update interval (seconds)
# Default: 3600 (1 hour) - half-hour offset from resources
# Population growth/happiness/immigration/emigration checks
POPULATION_INTERVAL_SEC=3600

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
# Log level controls verbosity of server logs
# Options: DEBUG, INFO, WARN, ERROR
# DEBUG: All logs (development, very verbose)
# INFO: Normal operations (recommended for production)
# WARN: Warnings and errors only
# ERROR: Errors only
LOG_LEVEL=INFO

# -----------------------------------------------------------------------------
# Sentry Configuration (Error Tracking & Monitoring)
# -----------------------------------------------------------------------------
# Optional: Get these from https://sentry.io/settings/projects/
# Set to "disabled" if you don't want error tracking

# Sentry DSN (Data Source Name) for error reporting
# Example: https://abc123@o123456.ingest.sentry.io/123456
SENTRY_DSN=disabled

# Sentry Auth Token for source map uploads during build
# Only needed in CI/CD or when deploying with source maps
SENTRY_AUTH_TOKEN=disabled

# Sentry release identifier (optional)
# Used to track which version of code is running
SENTRY_RELEASE=uncharted-lands-server@dev

# -----------------------------------------------------------------------------
# Session & Authentication
# -----------------------------------------------------------------------------
# Session secret for signing session cookies
# IMPORTANT: Generate a secure random string for production
# Use: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# This should be a long, random string - DO NOT use the example value below!
SESSION_SECRET=your-secret-session-key-change-this-in-production

# -----------------------------------------------------------------------------
# Testing & Development
# -----------------------------------------------------------------------------
# Admin token for test endpoints (test environment only)
# Used by E2E tests to trigger disasters, etc.
# Should only be set in test/development environments
# TEST_ADMIN_TOKEN=test-admin-secret-token

# -----------------------------------------------------------------------------
# Production Deployment Notes
# -----------------------------------------------------------------------------
# Render.com:
#   - PORT is set automatically by the platform
#   - Set DATABASE_URL to your PostgreSQL connection string
#   - Set CORS_ORIGINS to your client URL (e.g., https://your-app.vercel.app)
#   - Set LOG_LEVEL=INFO for clean production logs
#   - SET SESSION_SECRET to a secure random string
#   - Set TICK_RATE, RESOURCE_INTERVAL_SEC, etc. as needed
#
# Railway:
#   - Similar to Render, PORT is auto-configured
#   - Use their PostgreSQL addon or external database
#
# E2E Testing:
#   - Set NODE_ENV=e2e
#   - Set RESOURCE_INTERVAL_SEC=10 (fast resource production)
#   - Set POPULATION_INTERVAL_SEC=10 (fast population updates)
#   - Set TEST_ADMIN_TOKEN for admin endpoints
#
# Environment variables can be set in the dashboard for both platforms
# =============================================================================
